<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><title>Deployment Options - utxos.org -- Bitcoin for Everyone</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=/favicon-32x32.png><link rel=stylesheet href=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css integrity=sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T crossorigin=anonymous><link rel=stylesheet href=/css/style.min.001cd82c5deb4a55f69f076992dd043b44db7bc374aefabccae88643876b11a8.css></head><body class='page page-default-single'><div id=main-menu-mobile class=main-menu-mobile><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class="menu-item-bip-119 materials dropdown show"><a class=dropdown-toggle href=# role=button id=dropdownMenuLink data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>BIP-119 Materials</span></a><div class=dropdown-menu aria-labelledby=dropdownMenuLink><div class=dropdown-item><a href=https://github.com/bitcoin/bips/blob/master/bip-0119.mediawiki style=color:#000>Specification</a></div><div class=dropdown-item><a href=https://github.com/bitcoin/bitcoin/pull/21702 style=color:#000>Core Pull Request</a></div><div class=dropdown-item><a href=/deployment/ style=color:#000>Deployment Options</a></div><div class=dropdown-item><a href=/alternatives/ style=color:#000>Alternative Designs</a></div><div class=dropdown-item><a href=/workshops/ style=color:#000>Workshops</a></div></div></li><li class="menu-item-applications dropdown show"><a class=dropdown-toggle href=# role=button id=dropdownMenuLink data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Applications</span></a><div class=dropdown-menu aria-labelledby=dropdownMenuLink><div class=dropdown-item><a href=/uses/ style=color:#000>Use Cases</a></div><div class=dropdown-item><a href=/analysis/ style=color:#000>Ecosystem Impact</a></div><div class=dropdown-item><a href=https://learn.sapio-lang.org style=color:#000>Sapio</a></div></div></li><li class=menu-item-signals><a href=/signals/><span>Signals</span></a></li><li class="menu-item-more resources"><a href=/resources/><span>More Resources</span></a></li><li class=menu-item-sponsors><a href=/sponsors/><span>Sponsors</span></a></li><li class=menu-item-telegram><a href=https://t.me/op_ctv><span>Telegram</span></a></li></ul></div><div class=wrapper><div class=header><div class=container><div class=logo><a href=https://utxos.org><img alt=utxos.org src=/images/logo.svg></a></div><div class=logo-mobile><a href=https://utxos.org><img alt=utxos.org src=/images/logo-mobile.svg></a></div><div id=main-menu class=main-menu><ul><li class=menu-item-home><a href=/><span>Home</span></a></li><li class="dropdown show"><a class="btn dropdown-toggle" href=# role=button id=dropdownMenuLink data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>BIP-119 Materials</span></a><div class=dropdown-menu aria-labelledby=dropdownMenuLink><div class=dropdown-item><a href=https://github.com/bitcoin/bips/blob/master/bip-0119.mediawiki>Specification</a></div><div class=dropdown-item><a href=https://github.com/bitcoin/bitcoin/pull/21702>Core Pull Request</a></div><div class=dropdown-item><a href=/deployment/>Deployment Options</a></div><div class=dropdown-item><a href=/alternatives/>Alternative Designs</a></div><div class=dropdown-item><a href=/workshops/>Workshops</a></div></div></li><li class="dropdown show"><a class="btn dropdown-toggle" href=# role=button id=dropdownMenuLink data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Applications</span></a><div class=dropdown-menu aria-labelledby=dropdownMenuLink><div class=dropdown-item><a href=/uses/>Use Cases</a></div><div class=dropdown-item><a href=/analysis/>Ecosystem Impact</a></div><div class=dropdown-item><a href=https://learn.sapio-lang.org>Sapio</a></div></div></li><li class=menu-item-signals><a href=/signals/><span>Signals</span></a></li><li class="menu-item-more resources"><a href=/resources/><span>More Resources</span></a></li><li class=menu-item-sponsors><a href=/sponsors/><span>Sponsors</span></a></li><li class=menu-item-telegram><a href=https://t.me/op_ctv><span>Telegram</span></a></li></ul></div><button id=toggle-main-menu-mobile class="hamburger hamburger--slider" type=button aria-label="Mobile Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button></div></div><div class="container pb-6 pt-6 pt-md-10 pb-md-10"><div class="row justify-content-start"><div class="offset-1 col-10 col-md-10"><div class="service service-single"><h1 class=title>Deployment Options</h1><div class=content><h1 id=deployment-schedule--technique>Deployment Schedule & Technique</h1><p>There is no presently defined deployment schedule for BIP-119.</p><p>There has been discussion on the <a href=https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2020-January/017547.html>mailing
list</a> about soft
fork activation techniques as an extension to existing methods, but it is still undecided how new
upgrades should be proposed, rolled out, and activated or rejected.</p><h1 id=op_checktemplateverify-deployment-options>OP_CHECKTEMPLATEVERIFY Deployment Options</h1><p>There are a couple different implementations and deployment strategies for OP_CHECKTEMPLATEVERIFY:</p><ul><li><code>OP_NOP4</code> Softfork</li><li>Taproot Tapscript Extension</li><li>Templated Tapscript Extension</li></ul><p>This page serves to mark the differences between these versions.</p><p>OP_CHECKTEMPLATEVERIFY is in some places (e.g., archives) referred to as OP_SECURETHEBAG or
OP_CHECKOUTPUTSHASHVERIFY as working names for the technique while under development while under
development.</p><h2 id=bip-119-op_nop4-softfork>BIP 119 OP_NOP4 Softfork</h2><p>This is currently the favored implementation and deployment of <code>OP_CHECKTEMPLATEVERIFY</code>.</p><p>In this version, <code>OP_CHECKTEMPLATEVERIFY</code> is implemented as a soft-fork upgrade to <code>OP_NOP</code> much like
<code>OP_CHECKLOCKTIMEVERIFY</code>. This would make <code>OP_CHECKTEMPLATEVERIFY</code> available for both SegWit and plain
script outputs.</p><p><i>Note: P2SH is not compatible with <code>OP_CHECKTEMPLATEVERIFY</code> inehrently because of the hash cycle caused
by putting the redeemScript on the scriptSig, which changes the TXID.</i></p><p>The implementation suggests to begin signaling for the soft-fork on versionbit 25 on January 1st,
2020 for 1 year, but this can be replaced with actual values once formally proposed.</p><h3 id=links>Links</h3><ul><li><a href=https://github.com/JeremyRubin/bips/blob/op-secure-the-bag-master/bip-secure-the-bag.mediawiki>BIP Draft</a></li><li><a href=https://github.com/JeremyRubin/bitcoin/tree/securethebag_master>Implementation</a></li></ul><h2 id=taproot-tapscript-extension>Taproot Tapscript Extension</h2><p>This version of <code>OP_CHECKTEMPLATEVERIFY</code> builds on Tapscript&rsquo;s proposed <code>OP_SUCCESS{X}</code> script upgrade
mechanism. Therefore <code>OP_CHECKTEMPLATEVERIFY</code> is only available within Tapscript. There are use
cases where bare scripts may be desirable.</p><p>Deployment would only be possible after or with Taproot&rsquo;s deployment, which is presently uncertain.</p><p>For these reasons, the <code>OP_NOP4</code> deployment strategy has been
drafted.</p><h3 id=links-1>Links</h3><ul><li><a href=https://github.com/JeremyRubin/bips/blob/op-secure-the-bag/bip-secure-the-bag.mediawiki>BIP Draft</a></li><li><a href=https://github.com/JeremyRubin/bitcoin/tree/secure_the_bag>Implementation</a></li></ul><h2 id=templated-tapscript-extension>Templated Tapscript Extension</h2><p>Because of the structure of Taproot, an <code>OP_CHECKTEMPLATEVERIFY</code> script has an
additional 32 byte overhead compared to a bare <code>OP_NOP4</code> style upgrade. By
templating the Tapscripts to support a special case <code>OP_CHECKTEMPLATEVERIFY</code>, this
overhead can be eliminated.</p><p>This technique is notable because it could be added to Taproot after the
<code>OP_NOP4</code> upgrade, but cannot be added to Taproot as a soft-fork if it is not
natively supported in Tapscript.</p><h3 id=links-2>Links</h3><p><a href=https://github.com/JeremyRubin/bitcoin/tree/taproot-with-builtin-templates>Implementation</a></p><hr><p>In addition, there is a withdrawn version, <code>OP_CHECKOUTPUTSHASHVERIFY</code>, which was vulnerable to
malleability issues.</p></div></div></div></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var t=document,e=t.createElement('script');e.async=!0,e.src='//utxos-org.disqus.com/embed.js',e.setAttribute('data-timestamp',+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class=footer><div class=container><div class=row><div class=col-12><div class=footer-inner><h3 class=footer-title>utxos.org -- Bitcoin for Everyone</h3><ul></ul></div></div></div></div></div><script type=text/javascript src=/js/scripts.min.98ee06cc35517b5800b382aecb0fc59893e95b9c11dd21842d0d57e4f68043e3.js></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-152627278-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-152627278-1')</script><link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:400,400i|IBM+Plex+Sans+Condensed:400,400i|IBM+Plex+Sans:100,100i,400,400i,700,700i|IBM+Plex+Serif:400,400i&display=swap" rel=stylesheet><script src=https://code.jquery.com/jquery-3.3.1.slim.min.js integrity=sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js integrity=sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1 crossorigin=anonymous></script>
<script src=https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js integrity=sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM crossorigin=anonymous></script></body></html>